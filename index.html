  <!-- Loader global -->
  <div id="global-loader" style="display:none;position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:2000;background:rgba(255,255,255,.6);align-items:center;justify-content:center;">
    <div class="spinner-border text-primary" style="width:3rem;height:3rem;" role="status" aria-label="Carregando..."></div>
  </div>
<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Sistema FEFO ‚Äî gerenciamento de estoque profissional">
<meta name="theme-color" content="#1a73e8">
<title>Sistema FEFO - Gest√£o de Estoque</title>

<!-- FontAwesome -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<!-- Libs -->
<script src="https://cdn.jsdelivr.net/npm/xlsx/dist/xlsx.full.min.js" defer></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js" defer></script>
<script src="https://unpkg.com/html5-qrcode" defer></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js" defer></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.25/jspdf.plugin.autotable.min.js" defer></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js" defer></script>

<link rel="stylesheet" href="style.css">
</head>

<body>

<!-- Loader Global -->
<div id="global-loader">
  <div class="spinner"></div>
</div>

<!-- Toast -->
<div id="toast" class="toast d-none">
  <div id="toast-body"></div>
</div>

<!-- Toast -->
<div id="toast" class="toast d-none">
  <div id="toast-body"></div>
</div>

<!-- ==================== LOGIN ==================== -->
<section id="login" class="tela">
  <div class="login-container">
    <div class="login-logo">
      <h1>Sistema FEFO</h1>
      <p>Gest√£o Profissional de Estoque</p>
    </div>
    <div class="login-form">
      <div class="form-group">
        <label for="email" class="form-label">E-mail</label>
        <input id="email" class="form-control" type="email" placeholder="seu@email.com" autocomplete="username">
      </div>
      <div class="form-group">
        <label for="senha" class="form-label">Senha</label>
        <input id="senha" type="password" class="form-control" placeholder="Digite sua senha" autocomplete="current-password">
      </div>
      <button type="button" class="btn btn-primary btn-lg w-100 mb-2" onclick="login()">
        <i class="fas fa-sign-in-alt"></i>
        Entrar
      </button>
      <button type="button" class="btn btn-secondary w-100" onclick="registrar()">
        <i class="fas fa-user-plus"></i>
        Criar Nova Conta
      </button>
    </div>
  </div>
</section>

<!-- ==================== SIDEBAR ==================== -->
<aside class="sidebar d-none" id="sidebar">
  <div class="sidebar-header">
    <h2 class="sidebar-logo">Sistema FEFO</h2>
    <p class="sidebar-subtitle">Gest√£o de Estoque</p>
  </div>
  <ul class="sidebar-nav">
    <li class="nav-item">
      <a href="#" onclick="abrir('menu')" class="nav-link active">
        <i class="fas fa-home"></i>
        Dashboard
      </a>
    </li>
    <li class="nav-item">
      <a href="#" onclick="abrir('estoque')" class="nav-link">
        <i class="fas fa-boxes"></i>
        Estoque
      </a>
    </li>
    <li class="nav-item">
      <a href="#" onclick="abrir('curvaABC')" class="nav-link">
        <i class="fas fa-chart-line"></i>
        Curva ABC
      </a>
    </li>
    <li class="nav-item">
      <a href="#" onclick="abrir('historico')" class="nav-link">
        <i class="fas fa-history"></i>
        Hist√≥rico
      </a>
    </li>
    <li class="nav-item">
      <a href="#" onclick="abrir('locais')" class="nav-link">
        <i class="fas fa-map-marker-alt"></i>
        Locais
      </a>
    </li>
    <li class="nav-item" id="menuUsuarios">
      <a href="#" onclick="abrir('usuarios')" class="nav-link">
        <i class="fas fa-users"></i>
        Usu√°rios
      </a>
    </li>
  </ul>
  <div class="sidebar-footer">
    <button class="btn btn-secondary w-100" onclick="logout()">
      <i class="fas fa-sign-out-alt"></i>
      Sair
    </button>
  </div>
</aside>

<!-- ==================== MAIN CONTENT ==================== -->
<div class="main-content d-none" id="mainContent">
  <div class="topbar">
    <h1 class="topbar-title" id="pageTitle">Dashboard</h1>
    <div class="topbar-actions">
      <div class="user-badge">
        <i class="fas fa-user-circle"></i>
        <span id="userName">Usu√°rio</span>
      </div>
    </div>
  </div>
  
  <div class="content-wrapper">

<!-- ==================== DASHBOARD ==================== -->
<!-- ==================== DASHBOARD ==================== -->
<section id="menu" class="tela d-none">
  
  <div class="stats-grid">
    <div class="stat-card primary">
      <div class="stat-label">Total de Produtos</div>
      <div class="stat-value" id="totalProdutos">0</div>
    </div>
    <div class="stat-card warning">
      <div class="stat-label">Pr√≥ximo ao Vencimento</div>
      <div class="stat-value" id="proxVencer">0</div>
    </div>
    <div class="stat-card danger">
      <div class="stat-label">Vencidos</div>
      <div class="stat-value" id="vencidos">0</div>
    </div>
  </div>

  <div class="card">
    <div class="card-header">
      <h3 class="card-title">A√ß√µes R√°pidas</h3>
    </div>
    <div class="card-body">
      <div class="actions-grid">
        <button class="action-btn" onclick="solicitarPermissaoNotificacao()">
          <i class="fas fa-bell"></i>
          <span>Ativar Alertas</span>
        </button>
        <button class="action-btn" onclick="fazerBackup()">
          <i class="fas fa-download"></i>
          <span>Fazer Backup</span>
        </button>
        <button class="action-btn" onclick="compartilharRelatorio('whatsapp')">
          <i class="fab fa-whatsapp"></i>
          <span>Enviar WhatsApp</span>
        </button>
        <button class="action-btn" onclick="limparDadosAntigos()">
          <i class="fas fa-trash-alt"></i>
          <span>Limpar Dados</span>
        </button>
      </div>
    </div>
  </div>

</section>

<!-- MODAL DE CONFIGURA√á√ïES -->
<div class="modal fade" id="modalConfiguracoes" tabindex="-1">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">‚öôÔ∏è Configura√ß√µes de Alertas</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <div class="mb-3">
          <label for="diasAlerta" class="form-label">üìÖ Alertar quando faltar:</label>
          <select id="diasAlerta" class="form-select">
            <option value="7">7 dias</option>
            <option value="15">15 dias</option>
            <option value="30">30 dias</option>
            <option value="45">45 dias</option>
            <option value="60">60 dias</option>
          </select>
        </div>
        
        <div class="mb-3">
          <label for="horarioAlerta" class="form-label">üïê Hor√°rio das notifica√ß√µes:</label>
          <input type="time" id="horarioAlerta" class="form-control" value="09:00">
        </div>
        
        <div class="mb-3">
          <div class="form-check form-switch">
            <input class="form-check-input" type="checkbox" id="alertaEmail" checked>
            <label class="form-check-label" for="alertaEmail">üìß Alertas por email</label>
          </div>
        </div>
        
        <div class="mb-3">
          <div class="form-check form-switch">
            <input class="form-check-input" type="checkbox" id="alertaNavegador" checked>
            <label class="form-check-label" for="alertaNavegador">üîî Alertas no navegador</label>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
        <button type="button" class="btn btn-primary" onclick="salvarConfiguracoes()">üíæ Salvar</button>
      </div>
    </div>
  </div>
</div>


<!-- ESTOQUE -->
<section id="estoque" class="tela d-none" aria-labelledby="estoque-title">
<h2 id="estoque-title" class="visually-hidden">Gest√£o de Estoque</h2>

<div class="row g-3">

<!-- CADASTRO -->
<div class="col-lg-4">
  <div class="card shadow-sm">
    <div class="card-body">
      <h6>Cadastro de Produto</h6>

      <button class="btn btn-outline-primary w-100 mb-2" onclick="abrirScanner()" data-bs-toggle="tooltip" data-bs-placement="top" title="Abrir leitor de c√≥digo de barras">
        <svg width="18" height="18" fill="currentColor" aria-hidden="true" style="vertical-align:-2px"><rect x="2" y="2" width="3" height="3" rx="1"/><rect x="19" y="2" width="3" height="3" rx="1"/><rect x="2" y="19" width="3" height="3" rx="1"/><rect x="19" y="19" width="3" height="3" rx="1"/><rect x="7" y="7" width="10" height="10" rx="2"/></svg> Bipar C√≥digo
      </button>
      
      <button class="btn btn-outline-success w-100 mb-2" onclick="importarProdutosEdinCompleto()" title="Importar cat√°logo COMPLETO com 100+ produtos de 10 marcas">
        üì¶ Importar Produtos Edin (100+ produtos)
      </button>
      
      <button class="btn btn-outline-warning w-100 mb-2" onclick="migrarCatalogoParaEstoque()" title="Adiciona todos os produtos do cat√°logo ao estoque com quantidade 0">
        üîÑ Migrar Cat√°logo ‚Üí Estoque (Quantidade 0)
      </button>
      
      <button class="btn btn-outline-info w-100 mb-2" onclick="verificarCatalogo()" title="Ver quantos produtos est√£o no cat√°logo">
        üìä Ver Cat√°logo (Quantos produtos?)
      </button>

      <div id="scanner"></div>

      <label for="codigoBarras" class="visually-hidden">C√≥digo de barras</label>
      <div class="input-group mb-2">
        <input id="codigoBarras" class="form-control" placeholder="C√≥digo de barras" autocomplete="off" inputmode="numeric" aria-label="C√≥digo de barras" tabindex="8">
        <button class="btn btn-primary" type="button" onclick="buscarProdutoPorCodigoBarras(document.getElementById('codigoBarras').value)" title="Buscar informa√ß√µes do produto" style="min-width: 80px;">
          üîç <span class="d-none d-sm-inline">Buscar</span>
        </button>
      </div>
      <label for="nomeProduto" class="visually-hidden">Produto</label>
      <input id="nomeProduto" class="form-control mb-2" placeholder="Produto" autocomplete="off" aria-label="Nome do produto" tabindex="9">
      <label for="marcaProduto" class="visually-hidden">Marca</label>
      <select id="marcaProduto" class="form-select mb-2" disabled aria-label="Marca do produto" tabindex="10">
      <option value="">Selecione a marca</option>
      </select>
      <label for="loteProduto" class="visually-hidden">Lote</label>
      <input id="loteProduto" class="form-control mb-2" placeholder="Lote (opcional)" autocomplete="off" aria-label="Lote" tabindex="10">
      <label for="fornecedorProduto" class="visually-hidden">Fornecedor</label>
      <input id="fornecedorProduto" class="form-control mb-2" placeholder="Fornecedor (opcional)" autocomplete="off" aria-label="Fornecedor" tabindex="10">
      <label for="localProduto" class="visually-hidden">Local de Armazenamento</label>
      <select id="localProduto" class="form-select mb-2" aria-label="Local de Armazenamento" tabindex="10">
        <option value="">üìç Local (opcional)</option>
      </select>
      <label for="quantidadeProduto" class="visually-hidden">Quantidade</label>
      <input id="quantidadeProduto" type="number" class="form-control mb-2" placeholder="Quantidade" autocomplete="off" aria-label="Quantidade" tabindex="11">
      <label for="estoqueMinimo" class="visually-hidden">Estoque M√≠nimo</label>
      <input id="estoqueMinimo" type="number" class="form-control mb-2" placeholder="Estoque M√≠nimo (opcional)" autocomplete="off" aria-label="Estoque m√≠nimo" tabindex="12">
      <label for="validadeProduto" class="visually-hidden">Validade</label>
      <input id="validadeProduto" type="date" class="form-control mb-3" aria-label="Validade" tabindex="13">

      <div class="d-grid gap-2">
        <button class="btn btn-success" onclick="salvarProduto()" data-bs-toggle="tooltip" data-bs-placement="top" title="Salvar produto no estoque" aria-label="Salvar produto" tabindex="14">
          <svg width="18" height="18" fill="currentColor" aria-hidden="true" style="vertical-align:-2px"><path d="M5 2a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.828a2 2 0 0 0-.586-1.414l-3.828-3.828A2 2 0 0 0 15.172 1H5zm0 2h10v4a2 2 0 0 0 2 2h4v10H5V4zm12 0v4h4l-4-4z"/></svg> Salvar
        </button>
        <button class="btn btn-outline-secondary" onclick="exportarExcel()" data-bs-toggle="tooltip" data-bs-placement="top" title="Exportar relat√≥rio Excel (XLSX)" aria-label="Exportar Excel" tabindex="15">
          <svg width="18" height="18" fill="currentColor" aria-hidden="true" style="vertical-align:-2px"><rect x="2" y="2" width="14" height="14" rx="2" fill="#198754"/><text x="9" y="13" text-anchor="middle" font-size="8" fill="#fff">X</text></svg> Exportar Excel
        </button>
        <button class="btn btn-outline-danger" onclick="exportarPDF()" data-bs-toggle="tooltip" data-bs-placement="top" title="Exportar relat√≥rio PDF profissional" aria-label="Exportar PDF" tabindex="15">
          <svg width="18" height="18" fill="currentColor" aria-hidden="true" style="vertical-align:-2px"><rect x="2" y="2" width="14" height="14" rx="2" fill="#dc3545"/><text x="9" y="13" text-anchor="middle" font-size="7" fill="#fff">PDF</text></svg> Exportar PDF
        </button>
      <footer class="text-center text-small muted-note mt-5 mb-2">
        <span>Sistema FEFO &copy; 2025 &mdash; Profissionalizado por <a href="#" tabindex="-1">Sua Empresa</a></span>
        <button id="toggle-dark" class="btn btn-sm btn-outline-secondary ms-2" style="vertical-align:middle" aria-label="Alternar tema escuro/claro" onclick="toggleDarkMode()">
          <span id="dark-icon" aria-hidden="true">üåô</span> <span class="visually-hidden">Alternar tema</span>
        </button>
      </footer>
        <script>
          // Sincroniza √≠cone do bot√£o de tema no menu
          function updateDarkIconMenu() {
            const icon = document.getElementById('dark-icon-menu');
            if (!icon) return;
            icon.textContent = document.body.classList.contains('dark') ? '‚òÄÔ∏è' : 'üåô';
          }
          document.addEventListener('DOMContentLoaded', function () {
            updateDarkIconMenu();
            document.body.addEventListener('classChange', updateDarkIconMenu);
          });
          // Hook para atualizar √≠cone ao alternar tema
          const origToggleDark = window.toggleDarkMode;
          window.toggleDarkMode = function() {
            origToggleDark();
            updateDarkIconMenu();
          }
        </script>
      <script>
        // Ativa tooltips Bootstrap
        document.addEventListener('DOMContentLoaded', function () {
          if (window.bootstrap && bootstrap.Tooltip) {
            [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]')).forEach(function (el) {
              new bootstrap.Tooltip(el);
            });
          }
          // Dark mode inicial
          try {
            if (localStorage.getItem('fefo-dark') === '1') document.body.classList.add('dark');
          } catch(e) { /* Storage bloqueado */ }
          updateDarkIcon();
        });
        function toggleDarkMode() {
          document.body.classList.toggle('dark');
          const isDark = document.body.classList.contains('dark');
          try {
            localStorage.setItem('fefo-dark', isDark ? '1' : '0');
          } catch(e) { /* Storage bloqueado */ }
          updateDarkIcon();
        }
        function updateDarkIcon() {
          const icon = document.getElementById('dark-icon');
          if (!icon) return;
          icon.textContent = document.body.classList.contains('dark') ? '‚òÄÔ∏è' : 'üåô';
        }
      </script>
      </div>
    </div>
  </div>
</div>

<!-- TABELA ERP -->
<div class="col-lg-8">
  <div class="card shadow-sm">
    <div class="card-body">

          <div class="row g-2 mb-3">
        <div class="col-md-6">
          <label for="buscaEstoque" class="visually-hidden">Buscar no estoque</label>
          <input id="buscaEstoque" class="form-control" aria-label="Buscar estoque"
            placeholder="Buscar produto, marca ou c√≥digo" onkeyup="filtrarEstoque()" tabindex="16">
        </div>
        <div class="col-md-4">
          <label for="filtroMarca" class="visually-hidden">Filtrar por marca</label>
          <select id="filtroMarca" class="form-select" onchange="filtrarEstoque()" aria-label="Filtrar por marca" tabindex="17">
            <option value="">Todas as marcas</option>
          </select>
        </div>
      </div>

      <div class="table-responsive">
        <table class="table table-hover table-sm">
          <thead class="table-dark">
            <tr>
              <th>C√≥digo</th>
              <th>Produto</th>
              <th>Marca</th>
              <th>Qtd</th>
              <th>Validade</th>
            </tr>
          </thead>
          <tbody id="tabelaEstoque"></tbody>
        </table>
      </div>

    </div>
  </div>
</div>

</div>

<button class="btn btn-link mt-3" onclick="voltar()" aria-label="Voltar ao menu" tabindex="18">‚¨Ö Voltar</button>
</section>

<!-- HIST√ìRICO DE MOVIMENTA√á√ïES -->
<section id="historico" class="tela d-none" aria-labelledby="historico-title">
  <h2 id="historico-title" class="visually-hidden">Hist√≥rico de Movimenta√ß√µes</h2>
  
  <div class="card shadow-sm">
    <div class="card-body">
      <h6 class="mb-3">Movimenta√ß√µes Recentes</h6>
      <div class="table-responsive">
        <table class="table table-hover table-sm">
          <thead class="table-dark">
            <tr>
              <th>Data/Hora</th>
              <th>Tipo</th>
              <th>Produto</th>
              <th>Marca</th>
              <th>Qtd</th>
              <th>Usu√°rio</th>
            </tr>
          </thead>
          <tbody id="tabelaHistorico"></tbody>
        </table>
      </div>
    </div>
  </div>
  
  <button class="btn btn-link mt-3" onclick="voltar()" aria-label="Voltar ao menu">‚¨Ö Voltar</button>
</section>

<!-- ==================== CURVA ABC ==================== -->
<section id="curvaABC" class="tela d-none">
  
  <!-- Explica√ß√£o da Curva ABC -->
  <div class="card mb-3" style="background: linear-gradient(135deg, #667eea15 0%, #764ba215 100%); border-color: #667eea;">
    <div class="card-body">
      <h3 class="card-title" style="color: #667eea; margin-bottom: 12px;">
        <i class="fas fa-chart-line"></i> O que √© Curva ABC?
      </h3>
      <p style="margin: 0; color: var(--text-secondary); line-height: 1.6;">
        <strong>Curva A:</strong> 20% dos produtos que representam 80% do valor total (alta prioridade)<br>
        <strong>Curva B:</strong> 30% dos produtos que representam 15% do valor (m√©dia prioridade)<br>
        <strong>Curva C:</strong> 50% dos produtos que representam 5% do valor (baixa prioridade)
      </p>
    </div>
  </div>

  <!-- Cards de Resumo -->
  <div class="stats-grid mb-4">
    <div class="stat-card" style="border-left-color: #10b981;">
      <div class="stat-label">üéØ Curva A - Alta Prioridade</div>
      <div class="stat-value" id="countA" style="color: #10b981;">0</div>
      <small style="color: var(--text-secondary);">~80% do valor total</small>
    </div>
    <div class="stat-card" style="border-left-color: #f59e0b;">
      <div class="stat-label">üìä Curva B - M√©dia Prioridade</div>
      <div class="stat-value" id="countB" style="color: #f59e0b;">0</div>
      <small style="color: var(--text-secondary);">~15% do valor total</small>
    </div>
    <div class="stat-card" style="border-left-color: #6b7280;">
      <div class="stat-label">üìâ Curva C - Baixa Prioridade</div>
      <div class="stat-value" id="countC" style="color: #6b7280;">0</div>
      <small style="color: var(--text-secondary);">~5% do valor total</small>
    </div>
  </div>

  <!-- Gr√°fico -->
  <div class="card mb-4">
    <div class="card-header">
      <h3 class="card-title">üìà Visualiza√ß√£o Gr√°fica</h3>
    </div>
    <div class="card-body">
      <canvas id="graficoABC" style="max-height: 400px;"></canvas>
    </div>
  </div>

  <!-- Tabela Detalhada -->
  <div class="card">
    <div class="card-header">
      <h3 class="card-title">üìã Produtos por Classifica√ß√£o</h3>
    </div>
    <div class="card-body">
      <div class="table-container">
        <table class="table" id="tabelaCurvaABC">
          <thead>
            <tr>
              <th>Classifica√ß√£o</th>
              <th>Produto</th>
              <th>Quantidade</th>
              <th>Valor Unit√°rio</th>
              <th>Valor Total</th>
              <th>% Acumulado</th>
            </tr>
          </thead>
          <tbody id="tabelaCurvaABCBody">
            <tr>
              <td colspan="6" class="text-center" style="padding: 40px; color: var(--text-secondary);">
                <i class="fas fa-inbox" style="font-size: 48px; opacity: 0.3; display: block; margin-bottom: 16px;"></i>
                Nenhum produto no estoque
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

</section>

<!-- ==================== üÜï LOCAIS DE ARMAZENAMENTO ==================== -->
<section id="locais" class="tela" style="display:none;">
  <div class="container py-4">
    <h2 class="mb-4">üìç Locais de Armazenamento</h2>
    
    <!-- Formul√°rio para adicionar local -->
    <div class="card mb-4">
      <div class="card-body">
        <h5 class="card-title">Adicionar Novo Local</h5>
        <div class="row g-3">
          <div class="col-md-6">
            <label for="nomeLocal" class="form-label">Nome do Local *</label>
            <input type="text" class="form-control" id="nomeLocal" placeholder="Ex: Prateleira A1, Geladeira 2" required>
          </div>
          <div class="col-md-6">
            <label for="descricaoLocal" class="form-label">Descri√ß√£o</label>
            <input type="text" class="form-control" id="descricaoLocal" placeholder="Ex: Setor refrigerado">
          </div>
          <div class="col-12">
            <button class="btn btn-primary" onclick="adicionarLocal()">
              <i class="fas fa-plus"></i> Adicionar Local
            </button>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Lista de locais -->
    <div class="card">
      <div class="card-body">
        <h5 class="card-title">Locais Cadastrados</h5>
        <div id="listaLocais" class="table-responsive">
          <p class="text-muted">Carregando...</p>
        </div>
      </div>
    </div>
    
    <button class="btn btn-outline-secondary btn-lg mt-3" onclick="voltar()">Voltar ao Menu</button>
  </div>
</section>

<!-- ==================== üÜï GERENCIAMENTO DE USU√ÅRIOS ==================== -->
<section id="usuarios" class="tela" style="display:none;">
  <div class="container py-4">
    <h2 class="mb-4">üë• Gerenciamento de Usu√°rios</h2>
    
    <!-- Adicionar usu√°rio -->
    <div class="card mb-4">
      <div class="card-body">
        <h5 class="card-title">Adicionar Novo Usu√°rio</h5>
        <div class="row g-3">
          <div class="col-md-4">
            <label for="nomeUsuario" class="form-label">Nome *</label>
            <input type="text" class="form-control" id="nomeUsuario" placeholder="Nome completo" required>
          </div>
          <div class="col-md-4">
            <label for="emailUsuario" class="form-label">Email *</label>
            <input type="email" class="form-control" id="emailUsuario" placeholder="email@exemplo.com" required>
          </div>
          <div class="col-md-4">
            <label for="perfilUsuario" class="form-label">Perfil *</label>
            <select class="form-select" id="perfilUsuario" required>
              <option value="">Selecione...</option>
              <option value="admin">üëë Admin (Acesso Total)</option>
              <option value="operador">üë§ Operador (Entrada/Sa√≠da)</option>
              <option value="visualizador">üëÅÔ∏è Visualizador (Somente Leitura)</option>
            </select>
          </div>
          <div class="col-12">
            <button class="btn btn-primary" onclick="adicionarUsuario()">
              <i class="fas fa-user-plus"></i> Adicionar Usu√°rio
            </button>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Lista de usu√°rios -->
    <div class="card">
      <div class="card-body">
        <h5 class="card-title">Usu√°rios Cadastrados</h5>
        <div id="listaUsuarios" class="table-responsive">
          <p class="text-muted">Carregando...</p>
        </div>
      </div>
    </div>
    
    <button class="btn btn-outline-secondary btn-lg mt-3" onclick="voltar()">Voltar ao Menu</button>
  </div>
</section>

</main>

<!-- Footer Profissional -->
<footer class="mt-5 py-4 text-center" style="background:linear-gradient(135deg, #667eea 0%, #764ba2 100%);color:#fff;">
  <div class="container">
    <p class="mb-2" style="font-weight:600;font-size:1.1rem;">üì¶ GEST√ÉO FEFO</p>
    <p class="mb-2" style="font-size:0.9rem;opacity:0.9;">Sistema Profissional de Controle de Estoque FEFO</p>
    <p class="mb-0" style="font-size:0.8rem;opacity:0.7;">&copy; 2025 - Todos os direitos reservados</p>
  </div>
</footer>

<!-- QR Code de acesso mobile - Canto inferior direito -->
<div id="qrcode-access" style="position:fixed;bottom:20px;right:20px;z-index:1000;background:rgba(255,255,255,0.98);border-radius:12px;padding:10px;box-shadow:0 4px 16px rgba(0,0,0,0.2);max-width:130px;opacity:0.7;transition:all 0.3s ease;">
  <div class="text-center">
    <div id="qrcode" style="margin:0 auto;"></div>
    <div class="mt-1" style="font-size:0.65rem;color:#666;font-weight:600;">üì± Acesso Mobile</div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" defer></script>
<script src="app.js" defer></script>
<script>
  // Ativa tooltips Bootstrap
  document.addEventListener('DOMContentLoaded', function () {
    if (window.bootstrap && bootstrap.Tooltip) {
      [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]')).forEach(function (el) {
        new bootstrap.Tooltip(el);
      });
    }
    // Gera QR Code de acesso mobile com IP local e porta
    function getLocalUrl() {
      // Retorna o endere√ßo p√∫blico do GitHub Pages
      return "https://mayyzena.github.io/sistema-fefo";
    }
    var qrcodeDiv = document.getElementById('qrcode');
    if (qrcodeDiv && window.QRCode) {
      // Limpa o conte√∫do antes de gerar para evitar duplicidade
      qrcodeDiv.innerHTML = "";
      var url = getLocalUrl();
      new QRCode(qrcodeDiv, {
        text: url,
        width: 100,
        height: 100,
        colorDark : "#222",
        colorLight : "#fff",
        correctLevel : QRCode.CorrectLevel.H
      });
    } else if (qrcodeDiv) {
      qrcodeDiv.innerHTML = '<div style="color:red;font-weight:bold">Erro ao carregar QR Code.<br>Verifique se o arquivo <code>vendor/qrcode.min.js</code> existe e est√° acess√≠vel.</div>';
    }
  });
</script>

<!-- Cat√°logo Completo EDIN - 100+ Produtos -->
<script src="produtos-edin-completo.js"></script>

</body>
</html>
